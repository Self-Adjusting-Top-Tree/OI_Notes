### 1.1 简单 dp

### 1.2 区间 dp

### 1.3 数位 dp

### 1.4 树上 dp

#### 1.4.4 P9847 [ICPC 2021 Nanjing R] Crystalfly（4 / 3 / 8）

注意到 $t\le 3$, 于是想到对 $t$ 的值做分类讨论.  $t\le 2$ 时若拿走了 $u$ 点的蝴蝶, 但是没有立即前往 $u$ 点的某个儿子 $v$ 取走所有的蝴蝶, 那么以后就必然无法再拿走 $v$ 点的蝴蝶了. 而 $t=3$ 在 $t\le 2$ 的基础上增加了一种情况: 拿走了 $u$ 点的蝴蝶, 走到另一个距离 $u$ 点 $1$ 单位的点 $w$, 然后回到 $u$, 再拿走 $v$ 点的蝴蝶. 

于是转移是显然的, 设 $f_x$ 表示当前考虑了 $x$ 子树内的答案, **不考虑 $x$ 点**, 最多可以拿走多少个蝴蝶: 

+ $f_x=\sum\limits_{v\in \text{son}_x}f_v+\max\limits_{v\in\text{son}_x}a_v$ 
+ $f_x=\sum\limits_{v\in\text{son}_x}f_v+\max\limits_{w\neq v}(a_v-f_v+\sum\limits_{k\in \text{son}_v}f_k+a_w)$（其中 $w$ 点满足 $t_w=3$）

答案为 $f_1+a_1$. 

额外记录 $g_x=\sum\limits_{v\in\text{son}_x}f_v$ 既可做到 $O(n\log n)$ 或 $O(n)$ 求解. 

### 1.5 状压 dp / 插头 dp / dp of dp

### 1.6 ddp

### 1.7 插入顺序维护的 dp

### 1.8 数据结构优化 dp

### 1.9 计数相关 dp

### 1.10 杂题

#### 1.10.3 P9849 [ICPC 2021 Nanjing R] Xingqiu's Joke

观察到 $|a-b|$ 的值不会变大, 且每一次操作后要么值不变, 要么值变为上一个数的因子. 然后猜测不同的合法状态数很少, 于是想到记忆化, 设 $f_{a,\text{diff}}$ 表示当前两个数的值分别为 $a$ 和 $a+\text{diff}$ 最少需要的操作步骤, 然后直接枚举到除公共质因子的部分, 可以处理出 $|a-b|$ 的所有质因子然后一个个带入, 判断是否可行, 然后更新当前的 dp 状态即可. 

一些边界条件是: 

+ $a=1$ 或 $b=1$: 返回 $0$
+ $|a-b|=1$: 返回 $\min(a,b)-1$
+ dp 时存在边界 $\min(a,b)-1$（即一直 $-1$）

### 

### 
移动袋鼠是比较困难的，所以考虑移动边界和中间的坑。先考虑没有坑的情况，此时只需要记录上下左右四个边界的移动情况，具体来说：上边界最下移动到哪里，下边界最上移动到哪里，左边界最右移动到哪里，右边界最左移动到哪里。

特判掉此时所有袋鼠都已经掉下去了的情况，剩下的可以考虑用某种方法快速的维护若初始洞在某个位置时，在边界范围内会被移动到的位置的数量。由于问题是静态的，所以直接用二维前缀和维护即可。时间复杂度为 $O(nm)$ 可以通过。